create database lineshare;

CREATE TABLE utente (
  id int(11) NOT NULL AUTO_INCREMENT,
  email varchar(50) NOT NULL,
  pass varchar(255) NOT NULL,
  nome varchar(30) NOT NULL,
  cognome varchar(30) NOT NULL,
  numeroCellulare varchar(20) DEFAULT NULL,
  dataNascita date DEFAULT NULL,
  sesso tinyint(1) DEFAULT NULL,
  fotoProfilo longblob DEFAULT NULL,
  PRIMARY key(id)
) ENGINE=InnoDB;

CREATE TABLE viaggio (
  id int(11) NOT NULL AUTO_INCREMENT,
  partenza varchar(50) NOT NULL,
  arrivo varchar(50) NOT NULL,
  data date NOT NULL,
  orarioPartenza varchar(10) NOT NULL,
  orarioArrivo varchar(10) NOT NULL,
  nPasseggeri int(11) NOT NULL,
  nMaxPasseggeri int(11) NOT NULL,
  prezzoTotale float(5) NOT NULL,
  note tinytext DEFAULT NULL,
  idGuidatore int(11) NOT NULL,
  PRIMARY key(id),
  FOREIGN KEY(idGuidatore) REFERENCES utente(id)
) ENGINE=InnoDB;


CREATE TABLE prenotazione (
  idViaggio int(11) NOT NULL,
  idUtente int(11) NOT NULL,
  Foreign key(idViaggio) REFERENCES viaggio(id),
  Foreign key (idUtente) REFERENCES utente(id)
) ENGINE=InnoDB;

CREATE TABLE feedback (
  id int(11) NOT NULL AUTO_INCREMENT Primary key,
  feedbackTesto text DEFAULT NULL,
  voto int(11) NOT NULL,
  idGuidatore int(11) NOT NULL,
  idCliente int(11) NOT NULL,

  Foreign key(idGuidatore) references utente(id),	
  Foreign key(idCliente) references utente(id)

) ENGINE=InnoDB;


